@page "/orderlist"
@using OrderDeliverySystem.Client.Shared
@*@attribute [Authorize(Roles = "Merchant,Admin,Delivery Worker")]*@
@using Microsoft.AspNetCore.Authorization;
@using OrderDeliverySystem.Client.Infrastructure.Services.Authentication
@using System.Net.Http.Json
@using OrderDeliverySystem.Share.Data.Models
@inject HttpClient httpClient
@inject IHttpClientFactory HttpClientFactory
@inject NavigationManager NavigationManager
@rendermode InteractiveServer


@*<MudContainer Class="my-10">
    <MudTable Items="@Elements.Take(4)" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@_loading" LoadingProgressColor="Color.Info">
        <HeaderContent>
            <MudTh>Order Id</MudTh>
            <MudTh>Order Time</MudTh>
            <MudTh>Items</MudTh>
            <MudTh>Total Amont</MudTh>
            <MudTh>Actions</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Nr">@context.OrderId</MudTd>
            <MudTd DataLabel="Sign">@context.Sign</MudTd>
            <MudTd DataLabel="Name">@context.Name</MudTd>
            <MudTd DataLabel="Position" HideSmall="_hidePosition">@context.Position</MudTd>
            <MudTd DataLabel="Molar mass">@context.Molar</MudTd>
        </RowTemplate>
    </MudTable>


</MudContainer>*@
@code {
    [Parameter]
    public string Role { get; set; }
    [Parameter]
    public string UserId { get; set; }

    bool _expanded = true;

    private void OnExpandCollapseClick()
    {
        _expanded = !_expanded;
    }

    private bool _hidePosition;
    private bool _loading;
    private IEnumerable<Order> Elements = new List<Order>();

    protected override async Task OnInitializedAsync()
    {
        Elements = await httpClient.GetFromJsonAsync<List<Order>>("API");
    }

}
