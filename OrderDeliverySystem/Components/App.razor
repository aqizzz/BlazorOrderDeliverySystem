<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="app.css" />
    <link rel="stylesheet" href="OrderDeliverySystem.styles.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAFeu-tdOM4SY-z8pfwZ8m35AOT7azMA2E&loading=async&libraries=geometry&v=beta" async>
    </script>
    <script src="/js/map.js" defer></script>
    <!--<style>
        /* 设置地图的尺寸 */
        #map {
            height: 100%;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>-->
    <HeadOutlet @rendermode="new InteractiveServerRenderMode(prerender: false)" />
</head>

<body>
    <Routes @rendermode="new InteractiveServerRenderMode(prerender: false)" />
    <script src="_framework/blazor.web.js"></script>
    <script src="_content/MudBlazor/MudBlazor.min.js"></script>
    <!--<script>
        let map, directionsService, directionsRenderer;

        // 初始化地图
        function initMap() {
            // 创建地图并设置默认位置
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -34.397, lng: 150.644 },
                zoom: 8
            });

            // 创建 DirectionsService 和 DirectionsRenderer 实例
            directionsService = new google.maps.DirectionsService();
            directionsRenderer = new google.maps.DirectionsRenderer();

            // 将 directionsRenderer 绑定到地图
            directionsRenderer.setMap(map);

            // 获取当前位置
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const currentLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };

                        // 目的地，可以改为任何有效的经纬度
                        const destination = { lat: 40.712776, lng: -74.005974 }; // Example: New York City

                        // 计算并显示路线
                        calculateAndDisplayRoute(currentLocation, destination);
                    },
                    () => {
                        handleLocationError(true, map.getCenter());
                    }
                );
            } else {
                // 浏览器不支持 Geolocation
                handleLocationError(false, map.getCenter());
            }
        }

        // 计算并显示路线
        function calculateAndDisplayRoute(origin, destination) {
            directionsService.route(
                {
                    origin: origin,
                    destination: destination,
                    travelMode: google.maps.TravelMode.DRIVING // 可以使用 WALKING, BICYCLING, TRANSIT
                },
                (response, status) => {
                    if (status === 'OK') {
                        // 在地图上显示路线
                        directionsRenderer.setDirections(response);
                    } else {
                        window.alert('Directions request failed due to ' + status);
                    }
                }
            );
        }

        // 处理地理位置错误
        function handleLocationError(browserHasGeolocation, pos) {
            const infoWindow = new google.maps.InfoWindow({
                map: map,
                position: pos,
                content: browserHasGeolocation
                    ? 'Error: The Geolocation service failed.'
                    : 'Error: Your browser doesn\'t support geolocation.'
            });
        }
    </script>-->

</body>

</html>
